// var userFeed = new Instafeed({
//     get: 'user',
//     userId: '7533979459',
//     clientId: 'a9387269c14d4f138a0edf9b99e6c016',
//     accessToken: '7533979459.1677ed0.8bf583d8a2b8418e96501920f346e66c',
//     resolution: 'standard_resolution',
//     template: '<a class="instagram-link" href="{{link}}" target="_blank" id="{{id}}">' + 
//     						'<div class="instagram-content">' +
//     							'<img src="{{image}}">' +
//     							'<div class="instagram-content-inner">' +
//     								'<h5 class="instagram-caption">{{caption}}</h5>' +
//     							'</div>' +
//     						'</div>' +
//     					'</a>',
//     sortBy: 'most-recent',
//     limit: 4,
//     links: true
//   });
//   userFeed.run();

$(document).ready(function(){

	var $header 	= $('#nav-spacer'),
			$footer 	= $('footer'),
			$hHeight 	= $header.outerHeight(true),
			$fHeight 	= $footer.outerHeight(true),

			$stage 		= $fHeight + $hHeight,

			container 	= $(".morphContainer"),
			doc = $(document),
			win = $(window),
			docHeight = doc.height(),
			winHeight = win.height(),

			s 					= $('.letter-S'),
			a 					= $('.letter-A'),
			l 					= $('.letter-L'),
			a2 					= $('.letter-A2'),
			d 					= $('.letter-D'),
			e 					= $('.letter-E'),
			a3 					= $('.letter-A3'),
			r 					= $('.letter-R'),
			t 					= $('.letter-T'),
			e2					= $('.letter-E2');



			tl = new TimelineLite({paused:true});

			tl
			.addLabel('step1')

			.to(container, 	0.2, 	{css: { left:'0', width: 360, height: 480}})

			.to(s, 		0.2, 	{css: { left:'0', 	top: 18, 	transform: 'rotate(0)'}}, 'step1')
			.to(a, 		0.2, 	{css: { left:311, 	top: 27, 	transform: 'rotate(0)'}}, 'step1')
			.to(l, 		0.2, 	{css: { left:132, 	top: 272}}, 'step1')
			.to(a2, 	0.2, 	{css: { left:70, 		top: -20}}, 'step1')
			.to(d, 		0.2, 	{css: { left:135, 	top: 120}}, 'step1')
			.to(e, 		0.2, 	{css: { left:179, 	top: 422, 	transform: 'rotate(-90deg)'}}, 'step1')
			.to(a3,		0.2, 	{css: { left:100, 	top: 197, 	transform: 'rotate(90deg)'}}, 'step1')
			.to(r,		0.2, 	{css: { left:205, 	top: 320}}, 'step1')
			.to(t, 		0.2, 	{css: { left:244, 	top: 180}}, 'step1')
			.to(e2, 	0.2, 	{css: { left:175, 	top: 40, 	transform: 'rotate(0)'}}, 'step1')

			.addLabel('step2')
			
			.to(container, 0.55,  { css: { bottom: 	$stage, left:'0', width:'100%', height:145, top:'initial'}})
			
			.to(s, 		0.55, 	{css: { left:168,  	top: 8, 	transform: 'rotate(90deg)'}}, 'step2')
			.to(a, 		0.55, 	{css: { left:1065,  top: 54, 	transform: 'rotate(0)'}}, 'step2')
			.to(l, 		0.55, 	{css: { left:100,  	top: 80, 	transform: 'rotate(-90deg)'}}, 'step2')
			.to(a2, 	0.55, 	{css: { left:450,  	top: 20, 	transform: 'rotate(0)'}}, 'step2')
			.to(d, 		0.55, 	{css: { left:963,  	top: 90, 	transform: 'rotate(270deg)'}}, 'step2')
			.to(e, 		0.55, 	{css: { left:340,  	top: 90, 	transform: 'rotate(-90deg)'}}, 'step2')
			.to(a3,		0.55, 	{css: { left:1140,  top: -20, transform: 'rotate(90deg)'}}, 'step2')
			.to(r,		0.55, 	{css: { left:1220,  top: 40, 	transform: 'rotate(90deg)'}}, 'step2')
			.to(t, 		0.55, 	{css: { left:266,  	top: 50, 	transform: 'rotate(0)'}}, 'step2')
			.to(e2, 	0.55, 	{css: { left:1322,  top: 36, 	transform: 'rotate(0)'}}, 'step2');


	
	win.resize(function(){
		docHeight = doc.height();
		winHeight = win.height();
	});	


	win.scroll(function(e){
		var scrollTop = win.scrollTop();
		var scrollPercent = (scrollTop) / ((docHeight + $stage) - winHeight);
		var scrollPercentRounded = Math.round(scrollPercent*100)/100;

		tl.progress( scrollPercent ).pause();

	});

});

// Get IE or Edge browser version
var version = detectIE();

if (version) { $('body').addClass('IE');}



(function () {
		var videoTrigger = $('.poster-trailer');
		
		videoTrigger.fancybox({
			animationEffect: "fade",
			smallBtn: false,
			toolbar : true,
			buttons: ["close"],
			afterShow: function(){

				var container = $('.fancybox-slide--current');
				var vid	= container.children();
	      vid[0].play();
      },
      beforeClose: function() {
      	var video = $('.video').get(0);
	      video.pause();
	      video.currentTime = 0;
      }
		});
})();


(function () {
	var $arrows = $('.soon .title span'),
			$container = $('.soon-movies')[0];

	function isOverflowing(element) {
        return (element.scrollWidth > element.offsetWidth);
    }

    function alertOverflow(element) {
        if (isOverflowing(element)) {
          $arrows.addClass('visible');
        } else {
          $arrows.removeClass('visible');
        }
    }

    alertOverflow($container);

    $(window).resize( function(){
    	alertOverflow($container);
    });

})(); 
(function () {

	var $trigger  = $('.poster-sinopsis'),
			$close		= $('.sinopsis-close'),
			$sinopsis;


	$trigger.on('click', function(e){
		e.preventDefault();
		$sinopsis = $(this).parents('.poster').siblings('.sinopsis');
		$sinopsis.addClass('active');
	});

	$close.on('click', function(e){
		e.preventDefault();
		$sinopsis.removeClass('active');
	});

})(); 
(function () {
	var topOptions 		= {
											preloadImages: true,
											touchEventsTarget: 'wrapper',
											hashNavigation: true,
											allowTouchMove:false,
											watchOverflow: true,
											pagination: {
												el: '.top-pagination',
												clickable: true,
												hiddenClass : 'top-pagination-hidden'
											},

											navigation: {
												nextEl: '.slide-right',
    										prevEl: '.slide-left',
    										disabledClass: 'slide-btn-disabled',
    										hiddenClass: 'slide-btn-hidden'
											},
											on : {
												imagesReady: function(){
													var $slides 		= this.slides.length,
															$controles 	=	$('.top-controls');
															if ($slides == 1) {$controles.addClass('is-hidden'); }
												}
											},
											breakpoints: {
								        640: {
								          allowTouchMove:true
								        }
								      }
										},

		swiperTop 		= new Swiper('.swiper-top' , topOptions),

		$sinopsisTop 	= $('.sinopsis-text-top'),
		$triggerTop 	= $('.poster-sinopsis-top'),
		$closeTop			= $('.sinopsis-close-top');

		$topSelect		= $('.slider-select'),

		$timeLinks		= $('.top-movie-links');



	$topSelect.change(function(){
		$target = $(this).parents().siblings('.top-movie-links');
		$(this).val() !== '' ? $target.addClass('filled') : $target.removeClass('filled');
	});

	$triggerTop.on('click', function(e){
		e.preventDefault();
		$sinopsisTop.addClass('active');
	});

	$closeTop.on('click', function(e){
		e.preventDefault();
		$sinopsisTop.removeClass('active');
	});

})();
